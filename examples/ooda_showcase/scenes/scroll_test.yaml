name: scroll_test
description: Test scrolling and tapping items in a list

setup:
  hot_restart: true
  navigate_to: /items
  setup_delay_ms: 300

steps:
  - checkpoint: list_top
    description: Item list at initial position (top)

  # Tap Item 3 at top of list
  - tap_label: "Item 3"
  - wait: visual_stability

  - checkpoint: after_tap_item3
    description: After tapping Item 3

  # Scroll down (swipe up gesture)
  - swipe:
      start_x: 540
      start_y: 1500
      end_x: 540
      end_y: 500
      duration_ms: 300

  - wait: visual_stability

  - checkpoint: list_scrolled_1
    description: After first scroll down

  # Tap an item that's now visible
  - tap_label: "Item 15"
  - wait: visual_stability

  - checkpoint: after_tap_item15
    description: After tapping Item 15

  # Scroll down more
  - swipe:
      start_x: 540
      start_y: 1500
      end_x: 540
      end_y: 500
      duration_ms: 300

  - wait: visual_stability

  - checkpoint: list_scrolled_2
    description: After second scroll down

  # Scroll down again
  - swipe:
      start_x: 540
      start_y: 1500
      end_x: 540
      end_y: 500
      duration_ms: 300

  - wait: visual_stability

  - checkpoint: list_scrolled_3
    description: After third scroll down

  # Tap an item deep in the list
  - tap_label: "Item 30"
  - wait: visual_stability

  - checkpoint: after_tap_item30
    description: After tapping Item 30

  # Scroll back up (swipe down gesture)
  - swipe:
      start_x: 540
      start_y: 500
      end_x: 540
      end_y: 1500
      duration_ms: 300

  - wait: visual_stability

  - checkpoint: list_scrolled_up
    description: After scrolling back up

barriers:
  visual_stability:
    timeout_ms: 3000
    consecutive_matches: 2
    polling_interval_ms: 150
