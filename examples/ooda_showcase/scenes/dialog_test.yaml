name: dialog_test
description: Test dialog overlay detection

setup:
  hot_restart: true
  navigate_to: /dialogs
  setup_delay_ms: 500

steps:
  - checkpoint: initial
    description: Dialogs screen before any dialogs

  # Tap "Show AlertDialog" button by label
  - tap_label: "Show AlertDialog"

  - wait: visual_stability

  - checkpoint: alert_dialog_open
    description: AlertDialog is visible (overlay detected)

  # Dismiss by tapping OK button
  - tap_label: "OK"

  - wait: visual_stability

  - checkpoint: alert_dialog_dismissed
    description: After dismissing AlertDialog

  # Tap "Show BottomSheet" button
  - tap_label: "Show BottomSheet"

  - wait: visual_stability

  - checkpoint: bottom_sheet_open
    description: BottomSheet is visible

  # Dismiss by tapping Close button
  - tap_label: "Close"

  - wait: visual_stability

  - checkpoint: bottom_sheet_dismissed
    description: After dismissing BottomSheet

  # Tap "Show DatePicker" button
  - tap_label: "Show DatePicker"

  - wait: visual_stability

  - checkpoint: date_picker_open
    description: DatePicker is visible

  # Dismiss by tapping Cancel button
  - tap_label: "Cancel"

  - wait: visual_stability

  - checkpoint: date_picker_dismissed
    description: After dismissing DatePicker

barriers:
  visual_stability:
    timeout_ms: 3000
    consecutive_matches: 2
    polling_interval_ms: 150
